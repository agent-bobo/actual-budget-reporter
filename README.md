# Budget Reporter - Actual Budget æ™ºèƒ½å‘¨æŠ¥ç³»ç»Ÿ

æ™ºèƒ½è´¢åŠ¡å‘¨æŠ¥ç”Ÿæˆå™¨ï¼Œä¸ Actual Budget é›†æˆï¼Œæ¯å‘¨è‡ªåŠ¨åˆ†ææ¶ˆè´¹æ•°æ®å¹¶æ¨é€åˆ° Discordã€‚

## âœ¨ ç‰¹æ€§

- ğŸ“Š **é›¶ Token æµªè´¹** - çº¯è§„åˆ™å¼•æ“è®¡ç®—æŒ‡æ ‡ï¼Œä»… Insight ä½¿ç”¨ Gemini
- ğŸ”” **è‡ªåŠ¨æ¨é€** - æ¯å‘¨æ—¥è‡ªåŠ¨å‘é€æŠ¥å‘Šåˆ° Discord
- ğŸ” **å¼‚å¸¸æ£€æµ‹** - è‡ªåŠ¨æ ‡è®°æ”¯å‡ºæ¿€å¢ã€å¤§é¢æ¶ˆè´¹ã€æœªåˆ†ç±»äº¤æ˜“
- ğŸ’° **é¢„ç®—è¿½è¸ª** - å¯¹æ¯”æœˆåº¦é¢„ç®—ï¼Œé¢„è­¦è¶…æ”¯é£é™©
- ğŸ§  **æ™ºèƒ½æ‘˜è¦** - Gemini ç”Ÿæˆè‡ªç„¶è¯­è¨€è´¢åŠ¡æ´å¯Ÿ

## ğŸ—ï¸ æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Actual Budget  â”‚â”€â”€â”€â”€â–¶â”‚  Budget Reporter â”‚â”€â”€â”€â”€â–¶â”‚   Discord     â”‚
â”‚   (ä½ çš„è´¦æœ¬)     â”‚     â”‚  â”œâ”€ Actual API   â”‚     â”‚  (æ‰‹æœºé€šçŸ¥)   â”‚
â”‚                 â”‚     â”‚  â”œâ”€ è§„åˆ™å¼•æ“      â”‚     â”‚               â”‚
â”‚                 â”‚     â”‚  â”œâ”€ Geminiæ‘˜è¦   â”‚     â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æˆæœ¬å¯¹æ¯”:**

| æ–¹æ¡ˆ | æ¯å‘¨ Token æ¶ˆè€— | æœˆæˆæœ¬ (Gemini Flash) |
|------|-----------------|----------------------|
| æ¯ç¬”äº¤æ˜“èµ° LLM (actual-ai æ¨¡å¼) | ~50,000 | ~$0.10 |
| **æœ¬æ–¹æ¡ˆ (é¢„èšåˆ+æ‘˜è¦)** | **~500** | **~$0.001** |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è·å– Actual Budget é…ç½®

ç™»å½• Actual Budget â†’ Settings â†’ Show advanced settings â†’ **Sync ID** å¤åˆ¶ä¸‹æ¥

### 2. åˆ›å»º Discord Webhook

Discord æœåŠ¡å™¨ â†’ è®¾ç½® â†’ Integrations â†’ Webhooks â†’ **New Webhook**

å¤åˆ¶ Webhook URL

### 3. è·å– Gemini API Key (å¯é€‰)

è®¿é—® [Google AI Studio](https://aistudio.google.com/app/apikey) åˆ›å»º API Key

> ä¸è®¾ç½®ä¹Ÿèƒ½è¿è¡Œï¼Œåªæ˜¯æ²¡æœ‰ AI ç”Ÿæˆçš„è‡ªç„¶è¯­è¨€æ‘˜è¦

### 4. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env
# ç¼–è¾‘ .env å¡«å…¥çœŸå®å€¼
```

### 5. å¯åŠ¨

```bash
# å’Œ Actual Budget ä¸€èµ·å¯åŠ¨
docker-compose up -d actual-server

# æµ‹è¯•è¿è¡Œä¸€æ¬¡
docker-compose run --rm budget-reporter
```

### 6. è®¾ç½®å®šæ—¶ä»»åŠ¡ (Cron)

```bash
# æ¯å‘¨æ—¥æ—©ä¸Š 10 ç‚¹è‡ªåŠ¨è¿è¡Œ
0 10 * * 0 cd /path/to/budget-reporter && ./run-weekly.sh
```

æˆ–ä½¿ç”¨ Docker å¥åº·æ£€æŸ¥æ–¹æ¡ˆï¼š

```yaml
# åœ¨ docker-compose ä¸­æ·»åŠ  scheduler æœåŠ¡
  scheduler:
    image: mcuadros/ofelia:latest
    depends_on:
      - budget-reporter
    command: daemon --docker
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    labels:
      ofelia.job-run.budget-report.schedule: "0 10 * * 0"
      ofelia.job-run.budget-report.container: "budget-reporter"
```

## ğŸ“‹ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|
| `ACTUAL_PASSWORD` | âœ… | Actual Budget ç™»å½•å¯†ç  |
| `ACTUAL_BUDGET_ID` | âœ… | Budget Sync ID (è®¾ç½®é‡Œæ‰¾) |
| `DISCORD_WEBHOOK_URL` | âœ… | Discord Webhook URL |
| `GOOGLE_GENERATIVE_AI_API_KEY` | âŒ | Gemini API Key |
| `MONTHLY_BUDGET` | âŒ | æœˆåº¦é¢„ç®—ï¼ŒJSONæ ¼å¼(å•ä½:åˆ†) |

### æœˆåº¦é¢„ç®—é…ç½®ç¤ºä¾‹

```bash
MONTHLY_BUDGET={"é¤é¥®":50000,"äº¤é€š":20000,"è´­ç‰©":30000}
# è¡¨ç¤º: é¤é¥®$500/æœˆ, äº¤é€š$200/æœˆ, è´­ç‰©$300/æœˆ
```

## ğŸ“Š æŠ¥å‘Šç¤ºä¾‹

```markdown
# ğŸ“Š æœ¬å‘¨è´¢åŠ¡ç®€æŠ¥
**2024-01-14 ~ 2024-01-20**

## ğŸ’° æ”¶æ”¯æ¦‚è§ˆ
â€¢ æ”¶å…¥: **$3,500**
â€¢ æ”¯å‡º: **$1,200** (æ—¥å‡ $171)
â€¢ ç»“ä½™: **$2,300**

## ğŸ“ˆ æ”¯å‡ºTop3
1. é¤é¥®: $450
2. äº¤é€š: $200
3. è´­ç‰©: $150

## âœ… é¢„ç®—çŠ¶æ€
é¢„ç®—è¿›åº¦æ­£å¸¸

## ğŸ’¡ æœ¬å‘¨æ´å¯Ÿ
æœ¬å‘¨é¤é¥®æ”¯å‡ºå æ”¶å…¥çš„13%ï¼Œå¤„äºå¥åº·èŒƒå›´ã€‚å»ºè®®ç»§ç»­ä¿æŒæ¯å‘¨
é¢„ç®—èŠ‚å¥ï¼Œæœˆåº•é¢„è®¡ç»“ä½™$2000+ï¼Œå¯ä»¥è€ƒè™‘å¢åŠ å‚¨è“„ç›®æ ‡ã€‚

## ğŸš¨ éœ€è¦å…³æ³¨
â€¢ å‘¨ä¸‰æœ‰ä¸€ç¬”$299çš„ç”µå­äº§å“æ”¯å‡º
```

## ğŸ› ï¸ å¼€å‘

```bash
# æœ¬åœ°å¼€å‘
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# æµ‹è¯•è¿è¡Œ
python -m src.reporter
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
budget-reporter/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ actual_client.py    # Actual Budget API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ analyzer.py         # è´¢åŠ¡åˆ†æå¼•æ“ (çº¯è§„åˆ™)
â”‚   â”œâ”€â”€ gemini_summarizer.py # Gemini æ‘˜è¦ç”Ÿæˆ
â”‚   â”œâ”€â”€ discord_notifier.py # Discord æ¨é€
â”‚   â””â”€â”€ reporter.py         # ä¸»ç¨‹åº
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env.example
â”œâ”€â”€ run-weekly.sh           # Cron è„šæœ¬
â””â”€â”€ README.md
```

## ğŸ”’ éšç§è¯´æ˜

- åŸå§‹äº¤æ˜“æ•°æ®**ä¸ä¼š**å‘é€åˆ° LLM
- ä»…å‘é€é¢„èšåˆçš„ç»Ÿè®¡æŒ‡æ ‡ (æ€»é¢ã€åˆ†ç±»å æ¯”ç­‰)
- Gemini ä»…ç”¨äºç”Ÿæˆ 3-5 å¥è¯çš„æ‘˜è¦
- æ‰€æœ‰æ•°æ®åœ¨æœ¬åœ°å¤„ç†ï¼Œä¸å­˜å‚¨åˆ°ä»»ä½•ç¬¬ä¸‰æ–¹

## ğŸ“ è·¯çº¿å›¾

- [x] åŸºç¡€å‘¨æŠ¥ç”Ÿæˆ
- [x] å¼‚å¸¸æ£€æµ‹ (ç¯æ¯”/å¤§é¢/æœªåˆ†ç±»)
- [x] Discord æ¨é€
- [x] Gemini æ™ºèƒ½æ‘˜è¦
- [ ] é¢„ç®—å¥åº·åº¦è¿½è¸ª
- [ ] æœˆåº¦è¶‹åŠ¿æŠ¥å‘Š
- [ ] å¼‚å¸¸å®æ—¶æé†’ (å¦ä¸€ä¸ª cron job)
- [ ] è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ¥å£ (æœªæ¥çš„æ–¹å‘)

## License

MIT
