# Budget Reporter - Actual Budget æ™ºèƒ½å‘¨æŠ¥ç³»ç»Ÿ

æ™ºèƒ½è´¢åŠ¡å‘¨æŠ¥ç”Ÿæˆå™¨ï¼Œä¸ Actual Budget é›†æˆï¼Œæ¯å‘¨è‡ªåŠ¨åˆ†ææ¶ˆè´¹æ•°æ®å¹¶æ¨é€åˆ° Discordã€‚

**Repo:** https://github.com/agent-bobo/actual-budget-reporter

## âœ¨ ç‰¹æ€§

- ğŸ“Š **é«˜æ•ˆæ•°æ®è·å–** - ä½¿ç”¨ `actualpy` ç›´æ¥ä¸ Actual Server é€šä¿¡ï¼Œæ— éœ€æ‰“å¼€å®¢æˆ·ç«¯
- ğŸ”” **è‡ªåŠ¨æ¨é€** - æ¯å‘¨æ—¥è‡ªåŠ¨å‘é€æŠ¥å‘Šåˆ° Discord
- ğŸ” **å¼‚å¸¸æ£€æµ‹** - è‡ªåŠ¨æ ‡è®°æ”¯å‡ºæ¿€å¢ã€å¤§é¢æ¶ˆè´¹ã€æœªåˆ†ç±»äº¤æ˜“
- ğŸ§¹ **æ™ºèƒ½è¿‡æ»¤** - è‡ªåŠ¨è¯†åˆ«å¹¶è¿‡æ»¤å†…éƒ¨è½¬è´¦ï¼Œé˜²æ­¢æ•°æ®å¤±çœŸ
- ğŸ’° **é¢„ç®—è¿½è¸ª** - å¯¹æ¯”æœˆåº¦é¢„ç®—ï¼Œé¢„è­¦è¶…æ”¯é£é™©
- ğŸ§  **æ™ºèƒ½æ‘˜è¦** - Gemini ç”Ÿæˆè‡ªç„¶è¯­è¨€è´¢åŠ¡æ´å¯Ÿ (åŸºäº Top 30 äº¤æ˜“æ·±åº¦åˆ†æ)
- ğŸ“ **ç»“æ„åŒ–å‘¨æŠ¥** - æ¸…æ™°çš„ Markdown æ ¼å¼ï¼ŒåŒ…å«æ”¶æ”¯æ¦‚è§ˆã€Top æ”¯å‡ºã€é¢„ç®—çŠ¶æ€ç­‰

## ğŸ—ï¸ æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Actual Budget  â”‚â”€â”€â”€â”€â–¶â”‚  Budget Reporter â”‚â”€â”€â”€â”€â–¶â”‚   Discord     â”‚
â”‚   (ä½ çš„è´¦æœ¬)     â”‚     â”‚  â”œâ”€ actualpy     â”‚     â”‚  (æ‰‹æœºé€šçŸ¥)   â”‚
â”‚                 â”‚     â”‚  â”œâ”€ è§„åˆ™å¼•æ“      â”‚     â”‚               â”‚
â”‚                 â”‚     â”‚  â”œâ”€ Geminiæ‘˜è¦   â”‚     â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æˆæœ¬å¯¹æ¯”:**

| æ–¹æ¡ˆ | æ¯å‘¨ Token æ¶ˆè€— | æœˆæˆæœ¬ (Gemini Flash) |
|------|-----------------|----------------------|
| æ¯ç¬”äº¤æ˜“èµ° LLM (actual-ai æ¨¡å¼) | ~50,000 | ~$0.10 |
| **æœ¬æ–¹æ¡ˆ (é¢„èšåˆ+æ‘˜è¦)** | **~2,000** | **~$0.002** |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è·å– Actual Budget é…ç½®

ç™»å½• Actual Budget â†’ Settings â†’ Show advanced settings â†’ **Sync ID** å¤åˆ¶ä¸‹æ¥

### 2. åˆ›å»º Discord Webhook

Discord æœåŠ¡å™¨ â†’ è®¾ç½® â†’ Integrations â†’ Webhooks â†’ **New Webhook**

å¤åˆ¶ Webhook URL

### 3. è·å– Gemini API Key (å¯é€‰)

è®¿é—® [Google AI Studio](https://aistudio.google.com/app/apikey) åˆ›å»º API Key

> ä¸è®¾ç½®ä¹Ÿèƒ½è¿è¡Œï¼Œåªæ˜¯æ²¡æœ‰ AI ç”Ÿæˆçš„è‡ªç„¶è¯­è¨€æ‘˜è¦

### 4. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env
# ç¼–è¾‘ .env å¡«å…¥çœŸå®å€¼
```

### 5. å¯åŠ¨

```bash
# å’Œ Actual Budget ä¸€èµ·å¯åŠ¨
docker-compose up -d actual-server

# æµ‹è¯•è¿è¡Œä¸€æ¬¡
docker-compose run --rm budget-reporter
```

### 6. è®¾ç½®å®šæ—¶ä»»åŠ¡ (Cron)

```bash
# æ¯å‘¨æ—¥æ—©ä¸Š 10 ç‚¹è‡ªåŠ¨è¿è¡Œ
0 10 * * 0 cd /path/to/budget-reporter && ./run-weekly.sh
```

æˆ–ä½¿ç”¨ Docker å¥åº·æ£€æŸ¥æ–¹æ¡ˆï¼š

```yaml
# åœ¨ docker-compose ä¸­æ·»åŠ  scheduler æœåŠ¡
  scheduler:
    image: mcuadros/ofelia:latest
    depends_on:
      - budget-reporter
    command: daemon --docker
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    labels:
      ofelia.job-run.budget-report.schedule: "0 10 * * 0"
      ofelia.job-run.budget-report.container: "budget-reporter"
```

## ğŸ“‹ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|
| `ACTUAL_SERVER_URL`| âœ… | Actual Server åœ°å€ (e.g. http://localhost:5006) |
| `ACTUAL_PASSWORD` | âœ… | Actual Budget ç™»å½•å¯†ç  |
| `ACTUAL_BUDGET_ID` | âœ… | Budget Sync ID (è®¾ç½®é‡Œæ‰¾) |
| `DISCORD_WEBHOOK_URL` | âœ… | Discord Webhook URL |
| `GEMINI_API_KEY` | âŒ | Gemini API Key |
| `GEMINI_MODEL` | âŒ | Gemini æ¨¡å‹ (é»˜è®¤: gemini-2.0-flash) |
| `ACTUAL_VERIFY_SSL`| âŒ | æ˜¯å¦éªŒè¯ SSL (é»˜è®¤: true, è‡ªç­¾è¯ä¹¦è®¾ä¸º false) |

### æœˆåº¦é¢„ç®—é…ç½®ç¤ºä¾‹ (å¯é€‰)

åœ¨ `src/analyzer.py` æˆ–æœªæ¥çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ã€‚

## ğŸ“Š æŠ¥å‘Šç¤ºä¾‹

```markdown
# ğŸ“Š æœ¬å‘¨è´¢åŠ¡ç®€æŠ¥
**2024-01-14 ~ 2024-01-20**

## ğŸ’° æ”¶æ”¯æ¦‚è§ˆ
â€¢ æ”¶å…¥: **$3,500**
â€¢ æ”¯å‡º: **$1,200** (æ—¥å‡ $171)
â€¢ ç»“ä½™: **$2,300**

## ğŸ“ˆ æ”¯å‡ºTop5
1. DoorDash: $45 (Food)
2. Uber: $35 (Transport)
3. Amazon: $150 (Shopping)
4. Netflix: $20 (Bills)
5. Starbucks: $15 (Food)

## âœ… é¢„ç®—çŠ¶æ€
é¢„ç®—è¿›åº¦æ­£å¸¸

## ğŸ’¡ æœ¬å‘¨æ´å¯Ÿ
æœ¬å‘¨é¤é¥®æ”¯å‡ºå æ”¶å…¥çš„13%ï¼Œå¤„äºå¥åº·èŒƒå›´ã€‚å»ºè®®ç»§ç»­ä¿æŒæ¯å‘¨
é¢„ç®—èŠ‚å¥ï¼Œæœˆåº•é¢„è®¡ç»“ä½™$2000+ï¼Œå¯ä»¥è€ƒè™‘å¢åŠ å‚¨è“„ç›®æ ‡ã€‚

## ğŸš¨ éœ€è¦å…³æ³¨
â€¢ 01-16æœ‰ä¸€ç¬”$299çš„ç”µå­äº§å“æ”¯å‡º (Best Buy)
â€¢ æœ¬å‘¨æ”¯å‡ºç¯æ¯”å¢é•¿ 20%
```

## ğŸ› ï¸ å¼€å‘

```bash
# æœ¬åœ°å¼€å‘
# Local Development
uv sync

# Run locally
uv run python -m src.reporter
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
budget-reporter/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ actual_client.py    # actualpy å®¢æˆ·ç«¯å°è£…
â”‚   â”œâ”€â”€ analyzer.py         # è´¢åŠ¡åˆ†æå¼•æ“ (çº¯è§„åˆ™)
â”‚   â”œâ”€â”€ gemini_summarizer.py # Gemini æ‘˜è¦ç”Ÿæˆ
â”‚   â”œâ”€â”€ discord_notifier.py # Discord æ¨é€
â”‚   â””â”€â”€ reporter.py         # ä¸»ç¨‹åº
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ uv.lock
â”œâ”€â”€ .env.example
â”œâ”€â”€ run-weekly.sh           # Cron è„šæœ¬
â””â”€â”€ README.md
```

## ğŸ”’ éšç§è¯´æ˜

- åŸå§‹äº¤æ˜“æ•°æ®**ä¸ä¼š**å‘é€åˆ° LLMï¼ˆé™¤éå¼€å¯æ‘˜è¦åŠŸèƒ½ï¼Œæ­¤æ—¶ä»…å‘é€è„±æ•åçš„äº¤æ˜“æ‘˜è¦ï¼‰
- Gemini ä»…æ¥æ”¶é¢„èšåˆçš„ç»Ÿè®¡æŒ‡æ ‡å’Œ Top 30 äº¤æ˜“æ¦‚è§ˆ
- æ‰€æœ‰æ•°æ®åœ¨æœ¬åœ°å¤„ç†ï¼Œä¸å­˜å‚¨åˆ°ä»»ä½•ç¬¬ä¸‰æ–¹

## ğŸ“ è·¯çº¿å›¾

- [x] åŸºç¡€å‘¨æŠ¥ç”Ÿæˆ
- [x] å¼‚å¸¸æ£€æµ‹ (ç¯æ¯”/å¤§é¢/æœªåˆ†ç±»)
- [x] Discord æ¨é€
- [x] Gemini æ™ºèƒ½æ‘˜è¦
- [x] è¿ç§»è‡³ actualpy
- [x] æ™ºèƒ½è½¬è´¦è¿‡æ»¤
- [ ] é¢„ç®—å¥åº·åº¦è¿½è¸ª
- [ ] æœˆåº¦è¶‹åŠ¿æŠ¥å‘Š
- [ ] å¼‚å¸¸å®æ—¶æé†’ (å¦ä¸€ä¸ª cron job)

## License

MIT
